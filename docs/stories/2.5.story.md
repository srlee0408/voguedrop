# Story 2.5: 효과 미리보기 섹션 (EffectsSection)

## Story

**As a** VogueDrop 사용자,
**I want** 선택한 효과들을 미리보고 순서를 조정할 수 있으며,
**so that** 최종 영상에 적용될 효과들을 확인하고 관리할 수 있다.

## Status

Completed

## Acceptance Criteria

1. [x] 선택된 효과들이 카드 형태로 표시됨
2. [x] 각 효과 카드에 이름과 예시 이미지가 표시됨
3. [x] X 버튼으로 개별 효과를 제거할 수 있음
4. [x] 최대 4개의 효과 슬롯이 표시되며, 빈 슬롯은 점선으로 표시됨
5. [x] 드래그 앤 드롭으로 효과 순서를 변경할 수 있음
6. [x] 효과가 없을 때 안내 메시지가 표시됨
7. [x] 효과 추가/제거시 부드러운 애니메이션이 적용됨

## Dev Notes

### EffectsSection 컴포넌트 구조
```typescript
interface EffectsSectionProps {
  selectedEffects: EffectTemplate[];
  onEffectRemove: (effectId: number) => void;
  onEffectReorder: (effects: EffectTemplate[]) => void;
}
```

### 레이아웃 구조
- 2x2 그리드 레이아웃 (최대 4개)
- 각 슬롯 크기: 고정 비율 (16:9 또는 정사각형)
- 빈 슬롯: 점선 보더 + "효과를 선택하세요" 텍스트

### 드래그 앤 드롭 구현
- react-beautiful-dnd 또는 @dnd-kit/sortable 사용
- 드래그 중 시각적 피드백
- 드롭 위치 표시자

### 애니메이션
- 효과 추가: fade-in + scale
- 효과 제거: fade-out + scale
- 순서 변경: smooth transition

### 상태 관리
- 부모 컴포넌트(Canvas 페이지)에서 효과 배열 관리
- EffectsSection은 표시와 이벤트 전달만 담당

## Tasks / Subtasks

### Task 1: 기본 레이아웃 구현 (AC: 1, 4)
- [x] 2x2 그리드 컨테이너 구현
- [x] EffectSlot 컴포넌트 생성
- [x] 빈 슬롯 UI 구현
- [x] 반응형 그리드 조정

### Task 2: 효과 카드 구현 (AC: 2, 3)
- [x] SelectedEffectCard 컴포넌트 생성
- [x] 효과 이름과 이미지 표시
- [x] X 버튼 구현 및 스타일링
- [x] 삭제 확인 인터랙션 (선택사항)

### Task 3: 드래그 앤 드롭 기능 (AC: 5)
- [x] 드래그 앤 드롭 라이브러리 설정
- [x] 드래그 가능한 카드 구현
- [x] 드롭 영역 및 순서 변경 로직
- [x] 드래그 중 시각적 피드백

### Task 4: 애니메이션 구현 (AC: 7)
- [x] 효과 추가 애니메이션
- [x] 효과 제거 애니메이션
- [x] 순서 변경 트랜지션
- [x] Framer Motion 또는 CSS 트랜지션 사용

### Task 5: 빈 상태 및 안내 (AC: 6)
- [x] 효과가 없을 때 안내 UI
- [x] 툴팁 또는 도움말 추가
- [x] 첫 사용자를 위한 온보딩 힌트

## Testing

### 테스트 요구사항
- 효과 카드 렌더링 테스트
- 효과 제거 기능 테스트
- 드래그 앤 드롭 동작 테스트
- 최대 4개 제한 표시 테스트
- 애니메이션 성능 테스트

### 테스트 시나리오
1. 1~4개 효과 선택시 올바른 표시
2. X 버튼 클릭시 효과 제거
3. 드래그로 첫 번째와 마지막 효과 위치 교환
4. 빈 상태에서 안내 메시지 표시
5. 효과 추가/제거시 애니메이션 동작

## Change Log
- [x] 2025-01-30: 초기 스토리 생성
- [x] 2025-01-30: 구현 완료

## Dev Agent Record

### Agent Model Used
- [x] Primary: Claude 3.5 Sonnet
- [x] Fallback: N/A

### Debug Log References
- [x] Session: 2025-01-30

### Completion Notes
- [x] EffectsSection을 완전히 재작성하여 선택된 효과 관리 기능 구현
- [x] @dnd-kit 라이브러리를 사용하여 드래그 앤 드롭 기능 구현
- [x] 2x2 그리드 레이아웃으로 최대 4개 효과 표시
- [x] 빈 슬롯 UI와 효과 추가 버튼 구현
- [x] 효과 제거시 페이드 아웃 애니메이션 구현
- [x] 하위 호환성을 위해 이전 Effect 인터페이스 유지

### File List
실제 생성/수정된 파일:
- [x] app/canvas/_components/EffectsSection.tsx (완전 재작성)
- [x] app/canvas/page.tsx (효과 제거/재정렬 핸들러 추가)
- [x] app/canvas/_components/LeftPanel.tsx (새로운 props 전달)
- [x] package.json (드래그 앤 드롭 라이브러리 추가)

## QA Results
- [x] 모든 acceptance criteria 충족
- [x] 타입스크립트 컴파일 에러 없음
- [x] ESLint 경고 해결
- [x] 드래그 앤 드롭 기능 정상 작동