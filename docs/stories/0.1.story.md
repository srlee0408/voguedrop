# Story 0.1: 파일 구조 리팩토링 - Feature-First Co-location

## Story

As a VogueDrop developer, I want to reorganize the file structure to follow Feature-First Co-location pattern, so that I can easily find and maintain related components for each page and improve development efficiency.

## Status

Ready for Review

## Acceptance Criteria

1. [ ] 홈 페이지 관련 컴포넌트들이 app/(home)/_components/ 디렉토리로 이동됨
2. [ ] 캔버스 페이지 관련 컴포넌트들이 app/canvas/_components/ 디렉토리로 이동됨
3. [ ] 비디오 에디터 관련 컴포넌트들이 app/video-editor/_components/ 디렉토리로 이동됨
4. [ ] 캔버스 관련 훅이 app/canvas/_hooks/ 디렉토리로 이동됨
5. [ ] 모든 페이지의 import 경로가 새로운 구조에 맞게 업데이트됨
6. [ ] 공용 컴포넌트(ui, modals, layout)는 현재 위치를 유지함
7. [ ] 빈 디렉토리(components/common/, components/pages/landing/)가 삭제됨
8. [ ] 애플리케이션이 리팩토링 후에도 정상적으로 동작함

## Dev Notes

### 현재 파일 구조 분석

**현재 구조:**
```
components/
├── canvas/            # 캔버스 도메인 컴포넌트 (7개 파일)
├── home/              # 홈 페이지 컴포넌트 (9개 파일)
├── pages/
│   └── video-editor/  # 비디오 에디터 컴포넌트 (6개 파일)
├── modals/            # 공용 모달 컴포넌트 (유지)
├── ui/                # 공용 UI 컴포넌트 (유지)
└── layout/            # 레이아웃 컴포넌트 (유지)
```

**목표 구조:**
```
voguedrop/
  ├── app/
  │   ├── (home)/
  │   │   ├── page.tsx
  │   │   └── _components/
  │   │       ├── HeroSection.tsx
  │   │       ├── FeaturesSection.tsx
  │   │       └── GallerySection.tsx
  │   ├── canvas/
  │   │   ├── page.tsx
  │   │   ├── _components/
  │   │   │   ├── Canvas.tsx
  │   │   │   ├── LeftPanel.tsx
  │   │   │   └── PrompterSection.tsx
  │   │   └── _hooks/
  │   │       └── useCanvas.ts
  │   └── video-editor/
  │       ├── page.tsx
  │       ├── _components/
  │       │   ├── VideoPreview.tsx
  │       │   ├── Timeline.tsx
  │       │   └── ControlBar.tsx
  │       └── _utils/
  │           └── video-helpers.ts
  ├── components/              # 진짜 공용 컴포넌트만
  │   ├── ui/                 # Design system components
  │   ├── modals/             # 공용 모달들
  │   └── layout/             # 전역 레이아웃
```

### 이동 대상 파일 목록

**홈 페이지 컴포넌트 (components/home/ → app/(home)/_components/):**
- BackgroundEffects.tsx
- CTASection.tsx
- FeaturesSection.tsx
- Footer.tsx
- GalleryItems.tsx
- GallerySection.tsx
- HeroSection.tsx
- HomeHeader.tsx
- HowItWorksSection.tsx

**캔버스 페이지 컴포넌트 (components/canvas/ → app/canvas/_components/):**
- Canvas.tsx
- CanvasControls.tsx
- EffectsSection.tsx
- ImageSection.tsx
- LeftPanel.tsx
- PrompterSection.tsx
- QuickActionsBar.tsx

**캔버스 훅 (hooks/useCanvas.ts → app/canvas/_hooks/):**
- useCanvas.ts

**비디오 에디터 컴포넌트 (components/pages/video-editor/ → app/video-editor/_components/):**
- ControlBar.tsx
- Header.tsx
- SoundLibraryModal.tsx
- Timeline.tsx
- VideoLibraryModal.tsx
- VideoPreview.tsx

### Import 경로 업데이트 필요 파일

1. **app/page.tsx** - 홈 페이지 컴포넌트 import 경로
2. **app/canvas/page.tsx** - 캔버스 컴포넌트 및 훅 import 경로
3. **app/video-editor/page.tsx** - 비디오 에디터 컴포넌트 import 경로
4. **각 이동된 컴포넌트 내부의 상대 경로** - 필요한 경우

### 주의사항

- `_components`, `_hooks` 폴더명에 언더스코어(_) 접두사를 사용하여 라우트가 아님을 명시
- 공용 컴포넌트(ui/, modals/, layout/)는 현재 위치 유지
- Git 히스토리 보존을 위해 `git mv` 명령어 사용 권장
- 이동 후 각 컴포넌트의 상대 경로 import 확인 필요

## Tasks / Subtasks

### Task 1: 홈 페이지 컴포넌트 구조 변경 (AC: 1, 5)
- [x] app/(home)/_components 디렉토리 생성
- [x] components/home/의 모든 컴포넌트를 app/(home)/_components/로 이동
- [x] app/page.tsx의 import 경로 업데이트

### Task 2: 캔버스 페이지 컴포넌트 구조 변경 (AC: 2, 4, 5)
- [x] app/canvas/_components 디렉토리 생성
- [x] app/canvas/_hooks 디렉토리 생성
- [x] components/canvas/의 모든 컴포넌트를 app/canvas/_components/로 이동
- [x] hooks/useCanvas.ts를 app/canvas/_hooks/로 이동
- [x] app/canvas/page.tsx의 import 경로 업데이트

### Task 3: 비디오 에디터 컴포넌트 구조 변경 (AC: 3, 5)
- [x] app/video-editor/_components 디렉토리 생성
- [x] components/pages/video-editor/의 모든 컴포넌트를 app/video-editor/_components/로 이동
- [x] app/video-editor/page.tsx의 import 경로 업데이트

### Task 4: 컴포넌트 내부 import 경로 검토 및 수정 (AC: 5)
- [x] 이동된 컴포넌트들의 내부 import 경로 확인
- [x] 상대 경로로 된 import문 수정 (필요한 경우)
- [x] 공용 컴포넌트 import 경로 확인

### Task 5: 정리 및 검증 (AC: 6, 7, 8)
- [x] components/common 디렉토리 삭제
- [x] components/pages/landing 디렉토리 삭제
- [x] components/pages 디렉토리 삭제 (비어있는 경우)
- [x] npm run dev로 개발 서버 실행하여 정상 동작 확인
- [x] 각 페이지(홈, 캔버스, 비디오 에디터) 방문하여 UI 확인
- [x] npm run build로 빌드 성공 확인

## Testing

### Manual Testing Checklist
1. 개발 서버가 에러 없이 시작되는가
2. 홈 페이지(/)가 정상적으로 렌더링되는가
3. 캔버스 페이지(/canvas)가 정상적으로 동작하는가
4. 비디오 에디터(/video-editor)가 정상적으로 동작하는가
5. 모든 모달이 정상적으로 열리고 닫히는가
6. 빌드가 성공적으로 완료되는가

### 리팩토링 검증
1. 모든 컴포넌트가 새로운 위치에 존재하는가
2. 이전 위치에 남은 파일이 없는가
3. Git 히스토리가 보존되었는가

## Dev Agent Record

### Agent Model Used
- [x] Primary: Claude 3.5 Sonnet
- [ ] Fallback: N/A 

### Debug Log References
- [x] Session: 2025-07-30 

### Completion Notes
- [x] 모든 컴포넌트 성공적으로 이동 완료
- [x] Import 경로 업데이트 완료
- [x] CanvasContext.tsx에서 useCanvas import 경로 수정
- [x] 빈 디렉토리 정리 완료
- [x] 개발 서버 및 빌드 테스트 성공 

### File List
이동/수정된 파일:
- [x] app/(home)/_components/* (9개 파일 - 신규 위치)
- [x] app/canvas/_components/* (7개 파일 - 신규 위치)
- [x] app/canvas/_hooks/useCanvas.ts (신규 위치)
- [x] app/video-editor/_components/* (6개 파일 - 신규 위치)
- [x] app/page.tsx (수정)
- [x] app/canvas/page.tsx (수정)
- [x] app/video-editor/page.tsx (수정)
- [x] app/canvas/_components/Canvas.tsx (import 경로 수정)
- [x] contexts/CanvasContext.tsx (import 경로 수정)

## Change Log
- [x] Initial story creation - 2025-07-30
- [x] Story implementation completed - 2025-07-30